!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e(t.map={},t.ng.core,t.ng.common)}(this,function(t,a,e){"use strict";var r,c=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function p(t){return"function"==typeof t}var n=!1,s={Promise:undefined,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;n=t},get useDeprecatedSynchronousErrorHandling(){return n}};function i(t){setTimeout(function(){throw t})}var l={closed:!0,next:function(t){},error:function(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;i(t)},complete:function(){}},h=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!=t&&"object"==typeof t}var u,d={e:{}};function g(){try{return u.apply(this,arguments)}catch(t){return d.e=t,d}}function m(t){return u=t,g}var y=function(n){function r(t){var e=n.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return e.errors=t,e.name="UnsubscriptionError",Object.setPrototypeOf(e,r.prototype),e}return c(r,n),r}(Error),b=function(){function r(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return r.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=r?r.length:0;n;)n.remove(this),n=++s<u&&r[s]||null;if(p(o))m(o).call(this)===d&&(e=!0,t=t||(d.e instanceof y?v(d.e.errors):[d.e]));if(h(i))for(s=-1,u=i.length;++s<u;){var c=i[s];if(f(c))if(m(c.unsubscribe).call(c)===d){e=!0,t=t||[];var a=d.e;a instanceof y?t=t.concat(v(a.errors)):t.push(a)}}if(e)throw new y(t)}},r.prototype.add=function(t){if(!t||t===r.EMPTY)return r.EMPTY;if(t===this)return this;var e=t;switch(typeof t){case"function":e=new r(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var n=e;(e=new r)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},r.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},r.EMPTY=((t=new r).closed=!0,t),r}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof y?e.errors:e)},[])}var _="function"==typeof Symbol&&"function"==typeof Symbol["for"]?Symbol["for"]("rxSubscriber"):"@@rxSubscriber",w=function(s){function o(t,e,n){var r=s.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=l;break;case 1:if(!t){r.destination=l;break}if("object"==typeof t){if(function i(t){return t instanceof w||"syncErrorThrowable"in t&&t[_]}(t)){var o=t[_]();r.syncErrorThrowable=o.syncErrorThrowable,(r.destination=o).add(r)}else r.syncErrorThrowable=!0,r.destination=new O(r,t);break}default:r.syncErrorThrowable=!0,r.destination=new O(r,t,e,n)}return r}return c(o,s),o.prototype[_]=function(){return this},o.create=function(t,e,n){var r=new o(t,e,n);return r.syncErrorThrowable=!1,r},o.prototype.next=function(t){this.isStopped||this._next(t)},o.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},o.prototype._next=function(t){this.destination.next(t)},o.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},o}(b),O=function(u){function t(t,e,n,r){var o,i=u.call(this)||this;i._parentSubscriber=t;var s=i;return p(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==l&&(p((s=Object.create(e)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}return c(t,u),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):i(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;i(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;i(n)}},t.prototype.__tryOrSetError=function(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0):(i(r),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(w);var C="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(){}var E=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,n){var r=this.operator,o=function i(t,e,n){if(t){if(t instanceof w)return t;if(t[_])return t[_]()}return t||e||n?new w(t,e,n):new w(l)}(t,e,n);if(r?r.call(o,this.source):o.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),s.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},n.prototype.forEach=function(o,t){var e=this;return new(t=M(t))(function(t,n){var r;r=e.subscribe(function(t){try{o(t)}catch(e){n(e),r&&r.unsubscribe()}},n,t)})},n.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},n.prototype[C]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:function n(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:j}(t)(this)},n.prototype.toPromise=function(t){var r=this;return new(t=M(t))(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})},n.create=function(t){return new n(t)},n}();function M(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var x=function(e){function n(){var t=e.call(this,"object unsubscribed")||this;return t.name="ObjectUnsubscribedError",Object.setPrototypeOf(t,n.prototype),t}return c(n,e),n}(Error),S=function(r){function t(t,e){var n=r.call(this)||this;return n.subject=t,n.subscriber=e,n.closed=!1,n}return c(t,r),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},t}(b),k=function(n){function t(t){var e=n.call(this,t)||this;return e.destination=t,e}return c(t,n),t}(w),P=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return c(t,e),t.prototype[_]=function(){return new k(this)},t.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new x;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},t.prototype.error=function(t){if(this.closed)throw new x;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new x;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new x;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new x;return this.hasError?(t.error(this.thrownError),b.EMPTY):this.isStopped?(t.complete(),b.EMPTY):(this.observers.push(t),new S(this,t))},t.prototype.asObservable=function(){var t=new E;return t.source=this,t},t.create=function(t,e){return new I(t,e)},t}(E),I=function(r){function t(t,e){var n=r.call(this)||this;return n.destination=t,n.source=e,n}return c(t,r),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):b.EMPTY},t}(P);function z(){return function(t){return t.lift(new D(t))}}var D=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new L(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),L=function(r){function t(t,e){var n=r.call(this,t)||this;return n.connectable=e,n}return c(t,r),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(w),A=function(r){function t(t,e){var n=r.call(this)||this;return n.source=t,n.subjectFactory=e,n._refCount=0,n._isComplete=!1,n}return c(t,r),t.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},t.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new b).add(this.source.subscribe(new T(this.getSubject(),this))),t.closed?(this._connection=null,t=b.EMPTY):this._connection=t),t},t.prototype.refCount=function(){return z()(this)},t}(E).prototype,N={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:A._subscribe},_isComplete:{value:A._isComplete,writable:!0},getSubject:{value:A.getSubject},connect:{value:A.connect},refCount:{value:A.refCount}},T=function(r){function t(t,e){var n=r.call(this,t)||this;return n.connectable=e,n}return c(t,r),t.prototype._error=function(t){this._unsubscribe(),r.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},t}(k),$=function(n){function t(t){var e=n.call(this)||this;return e._value=t,e}return c(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var e=n.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value},t.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},t}(P),R=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.pending=!1,n}return c(t,r),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},t.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?e:clearInterval(e)&&undefined||undefined},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var n=!1,r=undefined;try{this.work(t)}catch(o){n=!0,r=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(function(n){function t(t,e){return n.call(this)||this}return c(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(b)),V=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.scheduler=t,n.work=e,n}return c(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),0<e?r.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return 0<e||this.closed?r.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,t,e,n):t.flush(this)},t}(R),G=function(){function n(t,e){void 0===e&&(e=n.now),this.SchedulerAction=t,this.now=e}return n.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},n.now=function(){return Date.now()},n}(),W=function(r){function o(t,e){void 0===e&&(e=G.now);var n=r.call(this,t,function(){return o.delegate&&o.delegate!==n?o.delegate.now():e()})||this;return n.actions=[],n.active=!1,n.scheduled=undefined,n}return c(o,r),o.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,n):r.prototype.schedule.call(this,t,e,n)},o.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},o}(G),U=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(W))(V),F=new E(function(t){return t.complete()});function Z(t){return t?function n(e){return new E(function(t){return e.schedule(function(){return t.complete()})})}(t):F}function B(t){return t&&"function"==typeof t.schedule}var q=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.closed||t.complete()}};function H(r,o){return new E(o?function(t){var e=new b,n=0;return e.add(o.schedule(function(){n!==r.length?(t.next(r[n++]),t.closed||e.add(this.schedule())):t.complete()})),e}:q(r))}function Y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(B(n)?t.pop():n=undefined,t.length){case 0:return Z(n);case 1:return n?H(t,n):function r(e){var t=new E(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}(t[0]);default:return H(t,n)}}function J(e,n){return new E(n?function(t){return n.schedule(K,0,{error:e,subscriber:t})}:function(t){return t.error(e)})}function K(t){var e=t.error;t.subscriber.error(e)}var X=function(){function e(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype["do"]=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},e.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this["do"](t,e,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Y(this.value);case"E":return J(this.error);case"C":return Z()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",undefined,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",undefined),e}(),Q=function(o){function e(t,e,n){void 0===n&&(n=0);var r=o.call(this,t)||this;return r.scheduler=e,r.delay=n,r}return c(e,o),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new tt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(X.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(X.createError(t))},e.prototype._complete=function(){this.scheduleMessage(X.createComplete())},e}(w),tt=function(){return function n(t,e){this.notification=t,this.destination=e}}(),et=function(o){function t(t,e,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var r=o.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=t<1?1:t,r._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return c(t,o),t.prototype.nextInfiniteTimeWindow=function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),o.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new nt(this._getNow(),t)),this._trimBufferThenGetEvents(),o.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=r.length;if(this.closed)throw new x;if(this.isStopped||this.hasError?e=b.EMPTY:(this.observers.push(t),e=new S(this,t)),o&&t.add(t=new Q(t,o)),n)for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);else for(s=0;s<i&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},t.prototype._getNow=function(){return(this.scheduler||U).now()},t.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(t-r[i].time<n);)i++;return e<o&&(i=Math.max(i,o-e)),0<i&&r.splice(0,i),r},t}(P),nt=function(){return function n(t,e){this.time=t,this.value=e}}();var rt=new W(R);function ot(t){return t}var it=function(e){function n(){var t=e.call(this,"argument out of range")||this;return t.name="ArgumentOutOfRangeError",Object.setPrototypeOf(t,n.prototype),t}return c(n,e),n}(Error),st=function(e){function n(){var t=e.call(this,"no elements in sequence")||this;return t.name="EmptyError",Object.setPrototypeOf(t,n.prototype),t}return c(n,e),n}(Error);Error;function ut(e,n){return function r(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new ct(e,n))}}var ct=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new at(t,this.project,this.thisArg))},t}(),at=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.project=e,r.count=0,r.thisArg=n||r,r}return c(t,o),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},t}(w),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(w),lt=function(o){function t(t,e,n){var r=o.call(this)||this;return r.parent=t,r.outerValue=e,r.outerIndex=n,r.index=0,r}return c(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(w),ht=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i),e}};function ft(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var dt=ft(),gt=function(r){return function(t){for(var e=r[dt]();;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e["return"]&&t.add(function(){e["return"]&&e["return"]()}),t}},mt=function(n){return function(t){var e=n[C]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},yt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function bt(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var vt=function(e){if(e instanceof E)return function(t){return e._isScalar?(t.next(e.value),t.complete(),undefined):e.subscribe(t)};if(e&&"function"==typeof e[C])return mt(e);if(yt(e))return q(e);if(bt(e))return ht(e);if(e&&"function"==typeof e[dt])return gt(e);var t=f(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function _t(t,e,n,r){var o=new lt(t,n,r);return vt(e)(o)}var wt={};var Ot=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Ct(t,this.resultSelector))},t}(),Ct=function(r){function t(t,e){var n=r.call(this,t)||this;return n.resultSelector=e,n.active=0,n.values=[],n.observables=[],n}return c(t,r),t.prototype._next=function(t){this.values.push(wt),this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(_t(this,r,r,n))}}},t.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(t,e,n,r,o){var i=this.values,s=i[n],u=this.toRespond?s===wt?--this.toRespond:this.toRespond:0;i[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},t}(pt);function jt(t,e){if(!e)return t instanceof E?t:new E(vt(t));if(null!=t){if(function n(t){return t&&"function"==typeof t[C]}(t))return function i(r,o){return new E(o?function(e){var n=new b;return n.add(o.schedule(function(){var t=r[C]();n.add(t.subscribe({next:function(t){n.add(o.schedule(function(){return e.next(t)}))},error:function(t){n.add(o.schedule(function(){return e.error(t)}))},complete:function(){n.add(o.schedule(function(){return e.complete()}))}}))})),n}:mt(r))}(t,e);if(bt(t))return function o(t,r){return new E(r?function(e){var n=new b;return n.add(r.schedule(function(){return t.then(function(t){n.add(r.schedule(function(){e.next(t),n.add(r.schedule(function(){return e.complete()}))}))},function(t){n.add(r.schedule(function(){return e.error(t)}))})})),n}:ht(t))}(t,e);if(yt(t))return H(t,e);if(function r(t){return t&&"function"==typeof t[dt]}(t)||"string"==typeof t)return function s(e,n){if(!e)throw new Error("Iterable cannot be null");return new E(n?function(o){var i,t=new b;return t.add(function(){i&&"function"==typeof i["return"]&&i["return"]()}),t.add(n.schedule(function(){i=e[dt](),t.add(n.schedule(function(){if(!o.closed){var t,e;try{var n=i.next();t=n.value,e=n.done}catch(r){return void o.error(r)}e?o.complete():(o.next(t),this.schedule())}}))})),t}:gt(e))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Et(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function Mt(e){return function n(t){return 0===arguments.length||Et(t)?n:e.apply(this,arguments)}}(function Cn(t){return function(){return t}});function xt(r){return function t(e,n){switch(arguments.length){case 0:return t;case 1:return Et(e)?t:Mt(function(t){return r(e,t)});default:return Et(e)&&Et(n)?t:Et(e)?Mt(function(t){return r(t,n)}):Et(n)?Mt(function(t){return r(e,t)}):r(e,n)}}}(function jn(t,e){return Number(t)+Number(e)});(function xb(e,n){return 1===e?Mt(n):vb(e,wb(e,[],n))});function St(i){return function t(n,r,o){switch(arguments.length){case 0:return t;case 1:return Et(n)?t:xt(function(t,e){return i(n,t,e)});case 2:return Et(n)&&Et(r)?t:Et(n)?xt(function(t,e){return i(t,r,e)}):Et(r)?xt(function(t,e){return i(n,t,e)}):Mt(function(t){return i(n,r,t)});default:return Et(n)&&Et(r)&&Et(o)?t:Et(n)&&Et(r)?xt(function(t,e){return i(t,e,o)}):Et(n)&&Et(o)?xt(function(t,e){return i(t,r,e)}):Et(r)&&Et(o)?xt(function(t,e){return i(n,t,e)}):Et(n)?Mt(function(t){return i(t,r,o)}):Et(r)?Mt(function(t){return i(n,t,o)}):Et(o)?Mt(function(t){return i(n,r,t)}):i(n,r,o)}}}var kt=Array.isArray||function kt(t){return null!=t&&0<=t.length&&"[object Array]"===Object.prototype.toString.call(t)};(function Db(e,n){return e<n?n:e});(function yt(t){return!!kt(t)||!!t&&("object"==typeof t&&(!Fb(t)&&(1===t.nodeType?!!t.length:0===t.length||0<t.length&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))});(function En(t,e){return vb(t.length,function(){return t.apply(e,arguments)})});"undefined"!=typeof Symbol&&Symbol.iterator;(function Mn(t,e){return new Pb(t,e)});function Pt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var It=Object.prototype.toString,zt=!{toString:null}.propertyIsEnumerable("toString"),Dt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Lt=function(){return arguments.propertyIsEnumerable("length")}(),At=function At(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},Nt=("function"!=typeof Object.keys||Lt?function Zb(e){if(Object(e)!==e)return[];var n,r,o=[],i=Lt&&function(){return"[object Arguments]"===It.call(arguments)?function(t){return"[object Arguments]"===It.call(t)}:function(t){return Pt("callee",t)}}(e);for(n in e)!Pt(n,e)||i&&"length"===n||(o[o.length]=n);if(zt)for(r=Dt.length-1;0<=r;)Pt(n=Dt[r],e)&&!At(o,n)&&(o[o.length]=n),r-=1;return o}:function Zb(e){return Object(e)!==e?[]:Object.keys(e)},function ut(n,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return xb(r.length,function(){return n.call(this,r.apply(this,arguments))});case"[object Object]":return Ob(function(t,e){return t[e]=n(r[e]),t},{},Zb(r));default:return Eb(n,r)}},function _b(e,n){for(var r=n,o=0;o<e.length;){if(null==r)return;r[e[o]],1}return r},function ac(e,n){return _b([e],n)},function bc(e,n){return $b(ac(e),n)},function dc(e,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(n):"function"==typeof e?function(t){return e(t)(n(t))}:Ob(function(t,e){return ub(t,$b(e,n))},[],e)},Mt(function Nt(t){return null==t}));(function gc(e,n){var r=xb(e,n);return xb(e,function(){return Ob(dc,$b(r,arguments[0]),Array.prototype.slice.call(arguments,1))})}),function xn(t){return gc(t.length,t)};(function Sn(t,e){return $b(t,nc(e))}),function kn(e,n){return"function"==typeof n?function(t){return e(n(t))(t)}:function t(u){return function c(t){for(var e,n,r,o=[],i=0,s=t.length;i<s;){if(Gb(t[i]))for(0,(u?c(t[i]):t[i]).length;r<n;)o[o.length]=e[r],1;else o[o.length]=t[i];1}return o}}(!1)($b(e,n))},function Pn(t){return null===t?"Null":t===undefined?"Undefined":Object.prototype.toString.call(t).slice(8,-1)},function In(t){return!t};function Tt(n,r){return function(){var t=arguments.length;if(0===t)return r();var e=arguments[t-1];return kt(e)||"function"!=typeof e[n]?r.apply(this,arguments):e[n].apply(e,Array.prototype.slice.call(arguments,0,t-1))}}var $t=St(Tt("slice",function $t(t,e,n){return Array.prototype.slice.call(n,t,e)}));Infinity;(function zn(t){return Fb(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});(function Dn(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e});(function Ln(t,e){return Fc(t,e,[],[])});var Rt=function Rt(t){return(t<10?"0":"")+t};"function"==typeof Date.prototype.toISOString?function An(t){return t.toISOString()}:function An(t){return t.getUTCFullYear()+"-"+Rt(t.getUTCMonth()+1)+"-"+Rt(t.getUTCDate())+"T"+Rt(t.getUTCHours())+":"+Rt(t.getUTCMinutes())+":"+Rt(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};(function Nn(t,e){return new Pc(t,e)}),function Tn(t,e){return Rc(function n(t){return function(){return!t.apply(this,arguments)}}(t),e)};(function Vc(r,o){return xb(cc(Db,0,bc("length",o)),function(){var e=arguments,n=this;return r.apply(n,Eb(function(t){return t.apply(n,e)},o))})}),function $n(t,e,n,r){return new Wc(t,e,n,r)},function Rn(r,o,i,t){return Ob(function(t,e){var n=i(e);return t[n]=r(Pt(n,t)?t[n]:o,e),t},{},t)},function Vn(t,e){return new _c(t,e)},function Gn(t,e){var n=t<0?e.length+t:t;return Fb(e)?e.charAt(n):e[n]},function Wn(t,e){var n=[],r=1,o=e.length;if(0!==o)for(n[0]=e[0];r<o;)t(cd(n),e[r])||(n[n.length]=e[r]),1;return n},function Un(r){return xb(r.length,function(t,e){var n=Array.prototype.slice.call(arguments,0);return n[0]=e,n[1]=t,r.apply(this,n)})};(function Fn(n,r){return xb(n+1,function(){var t=arguments[n];if(null!=t&&function e(t){return"[object Function]"===Object.prototype.toString.call(t)}(t[r]))return t[r].apply(t,Array.prototype.slice.call(arguments,0,n));throw new TypeError(Uc(t)+' does not have a method named "'+r+'"')})}),function Zn(t){return Vc(function(){return Array.prototype.slice.call(arguments,0)},t)},function Bn(t,e){return t*e};(function qn(t,e){for(var n={},r=0,o=t.length;r<o;){var i=t[r];n[i]=e[i],1}return n});var Vt="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";"function"==typeof String.prototype.trim&&!Vt.trim()&&"​".trim();function Gt(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}function Wt(t,e){return Error(t+": library '"+e+"' is missing, please ensure to include it in a 'libraries' parameter.\n    Example:\n      NguiMapModule.forRoot({\n        apiUrl: 'https://maps.googleapis.com/maps/api/js?libraries="+e+"'\n      })\n  ")}var Ut=function(n,r,t,e){if(void 0===e&&(e="loadedScripts"),void 0===t)return J(new Error('"window" has to be defined to load script'));t[e]=t[e]||{};var o=t[e];if(document.querySelector("#"+r)){var i=o[r];return Nt(i),Y(i)}return o[r]=!1,E.create(function(t){var e=document.createElement("script");e.id=r,e.async=!0,e.src=n,e.type="text/javascript",e.onload=function(){o[r]=!0,t.next(!0),t.complete()},document.querySelector("body").appendChild(e)})},Ft=function(){function t(t,e,n,r){var o=this;this.nguiMapComponent=t,this.mapObjectName=e,this.inputs=n,this.outputs=r,this.initialized$=new a.EventEmitter,this._subscriptions=[],this.nguiMap=this.nguiMapComponent.nguiMap,this.optionBuilder=this.nguiMapComponent.optionBuilder,this.outputs.forEach(function(t){return o[t]=new a.EventEmitter}),this.mapObjectName=e}return t.prototype.ngOnInit=function(){var t=this;this.nguiMapComponent.mapIdledOnce?this.initialize():this.nguiMapComponent.mapReady$.subscribe(function(){return t.initialize()})},t.prototype.initialize=function(){if(this.objectOptions=this.optionBuilder.googlizeAllInputs(this.inputs,this),"string"==typeof this.objectOptions.position&&delete this.objectOptions.position,"string"==typeof this.objectOptions.center&&delete this.objectOptions.center,this.libraryName){if(!google.maps[this.libraryName])throw Wt(this.mapObjectName,this.libraryName);this.mapObject=new google.maps[this.libraryName][this.mapObjectName](this.objectOptions)}else this.mapObject=new google.maps[this.mapObjectName](this.objectOptions);this.mapObject.setMap(this.nguiMapComponent.map),this.mapObject.mapObjectName=this.mapObjectName,this.mapObject.nguiMapComponent=this.nguiMapComponent,this.nguiMap.setObjectEvents(this.outputs,this,this.mapObject),this.nguiMapComponent.addToMapObjectGroup(this.mapObjectName,this.mapObject),this.initialized$.emit(this.mapObject)},t.prototype.ngOnChanges=function(t){this.nguiMap.updateGoogleObject(this.mapObject,t)},t.prototype.ngOnDestroy=function(){this._subscriptions.map(function(t){return t.unsubscribe()}),this.nguiMapComponent.removeFromMapObjectGroup(this.mapObjectName,this.mapObject),this.mapObject&&this.nguiMap.clearObjectEvents(this.outputs,this,"mapObject")},t}();Ft.propDecorators={initialized$:[{type:a.Output}]};function Zt(e,n){return void 0===n&&(n=rt),function(t){return t.lift(new Bt(e,n))}}var Bt=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new qt(t,this.dueTime,this.scheduler))},t}(),qt=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.dueTime=e,r.scheduler=n,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return c(t,o),t.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ht,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},t.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},t}(w);function Ht(t){t.debouncedNext()}var Yt=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Jt(t,this.defaultValue))},t}(),Jt=function(r){function t(t,e){var n=r.call(this,t)||this;return n.defaultValue=e,n.isEmpty=!0,n}return c(t,r),t.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(w);function Kt(e,n){return function(t){return t.lift(new Xt(e,n))}}var Xt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Qt(t,this.predicate,this.thisArg))},t}(),Qt=function(o){function t(t,e,n){var r=o.call(this,t)||this;return r.predicate=e,r.thisArg=n,r.count=0,r}return c(t,o),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},t}(w);var te=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new ee(t,this.nextOrObserver,this.error,this.complete))},t}(),ee=function(i){function t(t,e,n,r){var o=i.call(this,t)||this;return o._tapNext=j,o._tapError=j,o._tapComplete=j,o._tapError=n||j,o._tapComplete=r||j,p(e)?(o._context=o)._tapNext=e:e&&(o._context=e,o._tapNext=e.next||j,o._tapError=e.error||j,o._tapComplete=e.complete||j),o}return c(t,i),t.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},t}(w),ne=function(t){return void 0===t&&(t=re),function o(e,n,r){return function(t){return t.lift(new te(e,n,r))}}({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function re(){return new st}var oe=function(){function t(t){if(this.total=t,this.total<0)throw new it}return t.prototype.call=function(t,e){return e.subscribe(new ie(t,this.total))},t}(),ie=function(r){function t(t,e){var n=r.call(this,t)||this;return n.total=e,n.count=0,n}return c(t,r),t.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},t}(w);function se(o,e){var i=2<=arguments.length;return function(n){return n.pipe(o?Kt(function(t,e){return o(t,e,n)}):ot,function t(e){return function(t){return 0===e?Z():t.lift(new oe(e))}}(1),i?function r(e){return void 0===e&&(e=null),function(t){return t.lift(new Yt(e))}}(e):ne(function(){return new st}))}}var ue=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(t);return o.add(e.subscribe(r)),o},t}();function ce(t,e,n,r){n&&"function"!=typeof n&&(r=n);var o="function"==typeof n?n:undefined,i=new et(t,e,r);return function(t){return function e(r,o){return function(t){var e;if(e="function"==typeof r?r:function e(){return r},"function"==typeof o)return t.lift(new ue(e,o));var n=Object.create(t,N);return n.source=t,n.subjectFactory=e,n}}(function(){return i},o)(t)}}var ae=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new pe(t),r=_t(n,this.notifier);return r&&!r.closed?(n.add(r),e.subscribe(n)):n},t}(),pe=function(e){function t(t){return e.call(this,t)||this}return c(t,e),t.prototype.notifyNext=function(t,e,n,r,o){this.complete()},t.prototype.notifyComplete=function(){},t}(pt);var le=new a.InjectionToken("NG_MAP_CONFIG_TOKEN"),he=function(){function t(t){this.config=t,this.api$=new et(1),this.defaultConf={apiUrl:"https://maps.google.com/maps/api/js"},this.config=Object.assign({},this.defaultConf,this.config)}return t.prototype.load=function(){},t.prototype.ngOnDestroy=function(){this.api$.complete()},t}(),fe=function(n){function t(t){var e=n.call(this,t)||this;return e.scriptId="googleMaps",e}return c(t,n),t.prototype.load=function(){var e=this;return function t(){return"object"==typeof google&&"object"==typeof google.maps}()&&this.apiLoaded(),Ut(this.config.apiUrl,this.scriptId,window).subscribe(function(t){t&&e.apiLoaded()})},t.prototype.apiLoaded=function(){this.api$.next(google.maps)},t}(he);fe.decorators=[{type:a.Injectable}],fe.ctorParameters=function(){return[{type:undefined,decorators:[{type:a.Optional},{type:a.Inject,args:[le]}]}]};var de=function(){function t(t){this.apiLoader=t,this.apiLoaderSubs=[]}return t.prototype.geocode=function(e){var n=this;return new E(function(t){n.apiLoaderSubs.push(n.apiLoader.api$.subscribe(function(){return n.requestGeocode(e,t)}))})},t.prototype.ngOnDestroy=function(){this.apiLoaderSubs.map(function(t){return t.unsubscribe()})},t.prototype.requestGeocode=function(t,n){(new google.maps.Geocoder).geocode(t,function(t,e){e===google.maps.GeocoderStatus.OK?(n.next(t),n.complete()):n.error(t)})},t}();de.decorators=[{type:a.Injectable}],de.ctorParameters=function(){return[{type:he}]};var ge=function Hn(){var e=this;this.isLoaded=function(){return e._loaded$.value},this.loaded=function(t){void 0===t&&(t=!0),e._loaded$.next(t)},this._loaded$=new $(!1),this.loaded$=this._loaded$.asObservable()};ge.decorators=[{type:a.Injectable}],ge.ctorParameters=function(){return[]};var me=function(){function t(){}return t.prototype.googlizeAllInputs=function(t,e){var n=this,r={};return e.options?(console.log("userInputs.options .................",e.options),r=e.options,this.onlyOptionsGiven(t,e)||console.error('when "options" are used, other options are ignored')):t.forEach(function(t){e[t]!==undefined&&(r[t]=n.googlize(e[t],{key:t}))}),r},t.prototype.googlizeMultiple=function(t,e){for(var n in e=e||{},t){var r=t[n];"string"!=typeof r?e[n]=r:e.doNotConverStringToNumber&&r.match(/^[0-9]+$/)||(e[n]=this.googlize(r,{key:n}))}return e},t.prototype.googlize=function(t,e){e=e||{};var n=t;if("string"==typeof t&&(n="false"!==t&&("0"===t?0:this.getJSONParsed(t,e)||this.getAnyMapObject(t)||this.getAnyMapConstant(t,e)||this.getDateObject(t)||t)),e.key){var r=e.key;n instanceof Array?"bounds"===r?n=new google.maps.LatLngBounds(n[0],n[1]):"icons"===r?n=this.getMapIcons(n):("position"===r||r.match(/^geoFallback/))&&(n=this.getLatLng(n)):n instanceof Object&&("icon"===r?n=this.getMarkerIcon(n):r.match(/ControlOptions$/)&&(n=this.getMapControlOption(n)))}return delete n.doNotConverStringToNumber,delete n.key,n},t.prototype.getLatLng=function(t){var e;return t[0].constructor===Array?e=t.map(function(t){return new google.maps.LatLng(t[0],t[1])}):!isNaN(parseFloat(t[0]))&&isFinite(t[0])&&(e=new google.maps.LatLng(t[0],t[1])),e},t.prototype.getJSONParsed=function(t,e){var n;try{if((n=function o(t){if("string"==typeof t)return t.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(t="["+t+"]"),JSON.parse(function n(t){try{return t}catch(e){return t.replace(/([\$\w]+)\s*:/g,function(t,e){return'"'+e+'":'}).replace(/'([^']+)'/g,function(t,e){return'"'+e+'"'})}}(t));return t}(t))instanceof Array)n[0].constructor!==Object&&(n=this.getLatLng(n));else if(n===Object(n)){var r=e;r.doNotConverStringToNumber=!0,n=this.googlizeMultiple(n,r)}}catch(i){}return n},t.prototype.getAnyMapObject=function(t){var e;if(t.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{e=Function("return new google.maps."+t+";")()}catch(n){}return e},t.prototype.getAnyMapConstant=function(t,e){var n;if(t.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var r=t.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);n=google.maps[r[1]][r[2]]}catch(i){}else if(t.match(/^[A-Z]+$/))try{var o=e.key.charAt(0).toUpperCase()+e.key.slice(1);n=google.maps[o][t]}catch(i){}return n},t.prototype.getMapControlOption=function(t){var e=t;for(var n in e)if(e[n]){var r=e[n];if("string"==typeof r?r=r.toUpperCase():"mapTypeIds"===n&&(r=r.map(function(t){return t.match(/^[A-Z]+$/)?google.maps.MapTypeId[t.toUpperCase()]:t})),"style"===n){var o=n.replace(/Options$/,"")+"Style";e[n]=google.maps[o][r]}else e[n]="position"===n?google.maps.ControlPosition[r]:r}return e},t.prototype.getDateObject=function(t){var e;if(t.match(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/))try{e=new Date(t)}catch(n){}return e},t.prototype.getMapIcons=function(t){return t.map(function(t){return t.icon.path.match(/^[A-Z_]+$/)&&(t.icon.path=google.maps.SymbolPath[t.icon.path]),t})},t.prototype.getMarkerIcon=function(t){return Object.assign({},t)},t.prototype.onlyOptionsGiven=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if("options"!==r&&"undefined"!=typeof e[r])return!1}return!0},t}();me.decorators=[{type:a.Injectable}],me.ctorParameters=function(){return[]};var ye=function(){function t(t,e,n){var s=this;this.geoCoder=t,this.optionBuilder=e,this.zone=n,this.updateGoogleObject=function(n,t){var e,r,o;if(n)for(var i in t)o="set"+i.replace(/^[a-z]/,function(t){return t.toUpperCase()}),r=t[i].currentValue,-1!==["position","center"].indexOf(i)&&"string"==typeof r?function(e){s.geoCoder.geocode({address:r}).subscribe(function(t){"function"==typeof n[e]?n[e](t[0].geometry.location):console.error('Not all options are dynamically updatable according to Googles Maps API V3 documentation.\nPlease check Google Maps API documentation, and use "setOptions" instead.')})}(o):(e=s.optionBuilder.googlize(r),"function"==typeof n[o]?n[o](e):console.error('Not all options are dynamically updatable according to Googles Maps API V3 documentation.\nPlease check Google Maps API documentation, and use "setOptions" instead.'))}}return t.prototype.setObjectEvents=function(t,o,e){var i=this;t.forEach(function(n){var t=i.normalizeEventName(n),r=i.zone;r.runOutsideAngular(function(){e.addListener(t,function(t){var e=t||{};r.run(function(){return o[n].emit(e)})})})})},t.prototype.clearObjectEvents=function(t,n,r){var o=this;t.forEach(function(t){var e=o.normalizeEventName(t);o.zone.runOutsideAngular(function(){n[r]&&google.maps.event.clearListeners(n[r],e)})}),n[r]&&(n[r].setMap&&n[r].setMap(null),delete n[r].nguiMapComponent,delete n[r])},t.prototype.normalizeEventName=function(t){return t.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()}).replace(/^map_/,"")},t}();ye.decorators=[{type:a.Injectable}],ye.ctorParameters=function(){return[{type:de},{type:me},{type:a.NgZone}]};var be=function(){function t(){this.clustererLibUrl="https://cdnjs.cloudflare.com/ajax/libs/markerclustererplus/2.1.4/markerclusterer.min.js"}return t.prototype.getClusterer=function(){return this.MarkerClusterer$||(this.MarkerClusterer$=Ut(this.clustererLibUrl,"marker-clusterer",window).pipe(ut(function(){return MarkerClusterer}),ce(1),z())),this.MarkerClusterer$},t}();be.decorators=[{type:a.Injectable}],be.ctorParameters=function(){return[]};var ve=function(){function t(){}return t.prototype.getCurrentPosition=function(t){return t=t||{timeout:5e3},new E(function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.next(t),e.complete()},function(t){return e.error(t)},t):e.error("Browser Geolocation service failed.")})},t}();ve.decorators=[{type:a.Injectable}],ve.ctorParameters=function(){return[]};var _e=function Yn(t){var n=this;this._mapLoadedService=t;var r=new et;this.overlayDefined$=r.asObservable(),t.loaded$.pipe(Kt(Boolean),se()).subscribe(function(){n.CustomMarkerOverlayView=function e(t){return function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=o.call(this)||this;r.setPosition=function(t){r._position=t;var e=r.getProjection();if(e){var n=e.fromLatLngToDivPixel(r._position);r._htmlElement.style.left=Math.round(n.x)+"px",r._htmlElement.style.top=Math.round(n.y)+"px"}},r._htmlElement=t[0],r._draggable=t[2]||!1;var n=t[1];return r._position=n instanceof google.maps.LatLng?n:new google.maps.LatLng(+n.lat,+n.lng),r}return c(t,o),Object.defineProperty(t.prototype,"mapElement",{get:function(){var t=this._map;return t instanceof google.maps.Map&&t.getDiv()},enumerable:!0,configurable:!0}),t.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this._htmlElement),this._htmlElement.style.position="absolute"},t.prototype.draw=function(){this.setPosition(this._position),this.setZIndex(this._zIndex),this.setVisible(!0)},t.prototype.onRemove=function(){google.maps.event.clearInstanceListeners(this._htmlElement),this._draggable&&this._mouseLeaveMapListener.remove(),this._htmlElement.parentElement&&this._htmlElement.parentElement.removeChild(this._htmlElement)},t.prototype.getPosition=function(){return this._position},t.prototype.setMap=function(t){this._map=t,o.prototype.setMap.call(this,t),this._map&&this._draggable&&this._initDraggable()},t.prototype.setZIndex=function(t){t&&(this._zIndex=t),this._htmlElement.style.zIndex=this._zIndex},t.prototype.setVisible=function(t){this._htmlElement.style.display=t?"inline-block":"none"},t.prototype.setDraggable=function(t){this._draggable!==t&&((this._draggable=t)?this._initDraggable():this._disposeDragEvents())},t.prototype.getDraggable=function(){return this._draggable},t.prototype._disposeDragEvents=function(){this._mouseDownListerer&&this._mouseDownListerer.remove(),this._mouseUpListener&&this._mouseUpListener.remove(),this._moveHandler&&this._moveHandler.remove()},t.prototype._initDraggable=function(){var s=this,e=google.maps.event.addDomListener;this._htmlElement.draggable=!0,this._mouseLeaveMapListener=e(this.mapElement,"mouseleave",function(){return s._dragOrigin&&s._onDragEnd()}),this._mouseDownListerer=e(this._htmlElement,"mousedown",function(t){s._map.set("draggable",!1),s._dragOrigin=t,s._moveHandler=e(s.mapElement,"mousemove",function(t){var e=s._dragOrigin;if(e){var n=e.clientX-t.clientX,r=e.clientY-t.clientY,o=s.getProjection().fromLatLngToDivPixel(s._position),i=s.getProjection().fromDivPixelToLatLng(new google.maps.Point(Math.round(o.x-n),Math.round(o.y-r)));s._dragOrigin=t,s._position=i,s.draw()}})}),this._mouseUpListener=e(this._htmlElement,"mouseup",function(){return s._dragOrigin&&s._onDragEnd()})},t.prototype._onDragEnd=function(){this._map.set("draggable",!0),this._dragOrigin=null,this._moveHandler.remove(),google.maps.event.trigger(this,"dragend",this._position)},t}(t)}(google.maps.OverlayView),r.next(!0)})};_e.decorators=[{type:a.Injectable}],_e.ctorParameters=function(){return[{type:ge}]};var we=["backgroundColor","center","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","geoFallbackCenter","heading","keyboardShortcuts","mapMaker","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","options","overviewMapControl","overviewMapControlOptions","panControl","panControlOptions","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tilt","zoom","zoomControl","zoomControlOptions"],Oe=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","typeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tile_changed","zoom_changed","mapClick","mapMouseover","mapMouseout","mapMousemove","mapDrag","mapDragend","mapDragstart"],Ce=function(){function t(t,e,n,r,o,i,s,u){var c=this;this.optionBuilder=t,this.elementRef=e,this.geolocation=n,this.geoCoder=r,this.nguiMap=o,this.apiLoader=i,this.zone=s,this._mapLoadedService=u,this.mapReady$=new a.EventEmitter,this.mapOptions={},this.inputChanges$=new P,this.infoWindows={},this.mapIdledOnce=!1,this.initializeMapAfterDisplayed=!1,i.load(),Oe.forEach(function(t){return c[t]=new a.EventEmitter})}return t.prototype.ngAfterViewInit=function(){var t=this;this.apiLoaderSub=this.apiLoader.api$.subscribe(function(){return t.initializeMap()})},t.prototype.ngAfterViewChecked=function(){this.initializeMapAfterDisplayed&&this.el&&0<this.el.offsetWidth&&this.initializeMap()},t.prototype.ngOnChanges=function(t){this.inputChanges$.next(t)},t.prototype.initializeMap=function(){var e=this;this.el=this.elementRef.nativeElement.querySelector(".google-map"),this.el&&0===this.el.offsetWidth?this.initializeMapAfterDisplayed=!0:(this.initializeMapAfterDisplayed=!1,this.mapOptions=this.optionBuilder.googlizeAllInputs(we,this),this.mapOptions.zoom=this.mapOptions.zoom||15,"string"==typeof this.mapOptions.center&&delete this.mapOptions.center,this.zone.runOutsideAngular(function(){e.map=new google.maps.Map(e.el,e.mapOptions),e.map.mapObjectName="NguiMapComponent",e.mapOptions.center||e.setCenter(),e.nguiMap.setObjectEvents(Oe,e,e.map),e.map.addListener("idle",function(){e.mapIdledOnce||(e.mapIdledOnce=!0,setTimeout(function(){e.mapReady$.emit(e.map),e._mapLoadedService.loaded()}))}),e.inputChanges$.pipe(Zt(1e3)).subscribe(function(t){return e.nguiMap.updateGoogleObject(e.map,t)}),"undefined"!=typeof window&&window.nguiMapRef&&(window.nguiMapRef.map=e.map)}))},t.prototype.setCenter=function(){var n=this;this.center?"string"==typeof this.center&&this.geoCoder.geocode({address:this.center}).subscribe(function(t){console.log("setting map center from address",n.center),n.map.setCenter(t[0].geometry.location)},function(){n.map.setCenter(n.mapOptions.geoFallbackCenter||new google.maps.LatLng(0,0))}):this.geolocation.getCurrentPosition().subscribe(function(t){console.log("setting map center from current location");var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.map.setCenter(e)},function(){console.error("ngui-map: Error finding the current position"),n.map.setCenter(n.mapOptions.geoFallbackCenter||new google.maps.LatLng(0,0))})},t.prototype.openInfoWindow=function(t,e){this.infoWindows[t].open(e)},t.prototype.closeInfoWindow=function(t){this.infoWindows[t]&&this.infoWindows[t].close()},t.prototype.ngOnDestroy=function(){this.inputChanges$.complete(),this.el&&!this.initializeMapAfterDisplayed&&this.nguiMap.clearObjectEvents(Oe,this,"map"),this.apiLoaderSub&&this.apiLoaderSub.unsubscribe()},t.prototype.addToMapObjectGroup=function(t,e){var n=Gt(t.toLowerCase())+"s";this.map[n]=this.map[n]||[],this.map[n].push(e)},t.prototype.removeFromMapObjectGroup=function(t,e){var n=Gt(t.toLowerCase())+"s";if(this.map&&this.map[n]){var r=this.map[n].indexOf(e);-1<r&&this.map[n].splice(r,1)}},t}();Ce.decorators=[{type:a.Component,args:[{selector:"ngui-map",providers:[ye,me,de,ve,ge,_e,be],styles:["\n    ngui-map {display: block; height: 300px;}\n    .google-map {width: 100%; height: 100%}\n  "],inputs:we,outputs:Oe,encapsulation:a.ViewEncapsulation.None,template:'\n    <div class="google-map"></div>\n    <ng-content></ng-content>\n  '}]}],Ce.ctorParameters=function(){return[{type:me},{type:a.ElementRef},{type:ve},{type:de},{type:ye},{type:he},{type:a.NgZone},{type:ge}]},Ce.propDecorators={mapReady$:[{type:a.Output}]};var je=[],Ee=[],Me=function(e){function t(t){return e.call(this,t,"BicyclingLayer",je,Ee)||this}return c(t,e),t}(Ft);Me.decorators=[{type:a.Directive,args:[{selector:"ngui-map > bicycling-layer",inputs:je,outputs:Ee}]}],Me.ctorParameters=function(){return[{type:Ce}]};var xe=["content","disableAutoPan","maxWidth","pixelOffset","position","zIndex","options"],Se=["closeclick","content_changed","domready","position_changed","zindex_changed"],ke=function(){function t(t,e,n){var r=this;this.elementRef=t,this.nguiMap=e,this.nguiMapComponent=n,this.initialized$=new a.EventEmitter,this.objectOptions={},this.inputChanges$=new P,this.elementRef.nativeElement.style.display="none",Se.forEach(function(t){return r[t]=new a.EventEmitter})}return t.prototype.ngOnInit=function(){var t=this;this.nguiMapComponent.mapIdledOnce?this.initialize():this.nguiMapComponent.mapReady$.subscribe(function(){return t.initialize()})},t.prototype.ngOnChanges=function(t){this.inputChanges$.next(t)},t.prototype.initialize=function(){var e=this;this.objectOptions=this.nguiMapComponent.optionBuilder.googlizeAllInputs(xe,this),this.infoWindow=new google.maps.InfoWindow(this.objectOptions),this.infoWindow.mapObjectName="InfoWindow",this.elementRef.nativeElement.id?this.nguiMapComponent.infoWindows[this.elementRef.nativeElement.id]=this:console.error('An InfoWindow must have an id. e.g. id="detail"'),this.nguiMap.setObjectEvents(Se,this,this.infoWindow),this.inputChanges$.pipe(Zt(1e3)).subscribe(function(t){return e.nguiMap.updateGoogleObject(e.infoWindow,t)}),this.nguiMapComponent.addToMapObjectGroup("InfoWindow",this.infoWindow),this.initialized$.emit(this.infoWindow)},t.prototype.open=function(t){this.infoWindow.setContent(this.template.element.nativeElement),this.infoWindow.open(this.nguiMapComponent.map,t)},t.prototype.close=function(){this.infoWindow&&this.infoWindow.close()},t.prototype.ngOnDestroy=function(){this.inputChanges$.complete(),this.infoWindow&&(this.nguiMap.clearObjectEvents(Se,this,"infoWindow"),delete this.infoWindow)},t}();ke.decorators=[{type:a.Component,args:[{selector:"ngui-map > info-window",inputs:xe,outputs:Se,template:"<div #template><ng-content></ng-content></div>"}]}],ke.ctorParameters=function(){return[{type:a.ElementRef},{type:ye},{type:Ce}]},ke.propDecorators={initialized$:[{type:a.Output}],template:[{type:a.ViewChild,args:["template",{read:a.ViewContainerRef}]}]};var Pe=["center","clickable","draggable","editable","fillColor","fillOpacity","map","radius","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","options","geoFallbackCenter"],Ie=["centerChanged","click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","radiusChanged","rightclick"],ze=function(n){function t(t){var e=n.call(this,t,"Circle",Pe,Ie)||this;return e.nguiMapComp=t,e.objectOptions={},e}return c(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this),this.setCenter()},t.prototype.setCenter=function(){var n=this;this.center?"string"==typeof this.center&&this._subscriptions.push(this.nguiMapComp.geoCoder.geocode({address:this.center}).subscribe(function(t){console.log("setting circle center from address",n.center),n.mapObject.setCenter(t[0].geometry.location)},function(){console.error("ngui-map, error in finding location from",n.center),n.mapObject.setCenter(n.objectOptions.geoFallbackCenter||new google.maps.LatLng(0,0))})):this._subscriptions.push(this.nguiMapComp.geolocation.getCurrentPosition().subscribe(function(t){console.log("setting circle center from current location");var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.mapObject.setCenter(e)},function(){console.error("ngui-map, error in finding the current position"),n.mapObject.setCenter(n.objectOptions.geoFallbackCenter||new google.maps.LatLng(0,0))}))},t}(Ft);ze.decorators=[{type:a.Directive,args:[{selector:"ngui-map>circle, ngui-map>map-circle",inputs:Pe,outputs:Ie}]}],ze.ctorParameters=function(){return[{type:Ce}]};var De=["controlPosition","controls","drawingMode","featureFactory","style","geoJson","geoJsonUrl"],Le=["addfeature","click","dblclick","mousedown","mouseout","mouseover","mouseup","removefeature","removeproperty","rightclick","setgeometry","setproperty"],Ae=function(e){function t(t){return e.call(this,t,"Data",De,Le)||this}return c(t,e),t.prototype.initialize=function(){this.geoJson?(console.log("this.geoJson",this.geoJson),this.nguiMapComponent.map.data.addGeoJson(this.geoJson)):this.geoJsonUrl?(console.log("this.geoJsonUrl",this.geoJsonUrl),this.nguiMapComponent.map.data.loadGeoJson(this.geoJsonUrl)):(this.objectOptions=this.optionBuilder.googlizeAllInputs(this.inputs,this),console.log(this.mapObjectName,"initialization objectOptions",this.objectOptions),this.nguiMapComponent.map.data.add(this.objectOptions)),this.mapObject=this.nguiMapComponent.map.data,this.nguiMap.setObjectEvents(this.outputs,this,this.mapObject),this.nguiMapComponent.addToMapObjectGroup(this.mapObjectName,this.mapObject),this.initialized$.emit(this.mapObject)},t}(Ft);Ae.decorators=[{type:a.Directive,args:[{selector:"ngui-map > data-layer",inputs:De,outputs:Le}]}],Ae.ctorParameters=function(){return[{type:Ce}]};var Ne=["directions","draggable","hideRouteList","infoWindow","panel","markerOptions","polylineOptions","preserveViewport","routeIndex","suppressBicyclingLayer","suppressInfoWindows","suppressMarkers","suppressPolylines"],Te=["directions_changed"],$e=function(r){function t(t,e){var n=r.call(this,t,"DirectionsRenderer",Ne,Te)||this;return n.geolocation=e,n}return c(t,r),t.prototype.initialize=function(){this.objectOptions=this.optionBuilder.googlizeAllInputs(this.inputs,this),"string"==typeof this.objectOptions.panel&&(this.objectOptions.panel=document.querySelector(this.objectOptions.panel)),console.log("DirectionsRenderer","initialization options",this.objectOptions,this.directionsRequest),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer(this.objectOptions),this.directionsRenderer.setMap(this.nguiMapComponent.map),this.showDirections(this.directionsRequest),this.nguiMap.setObjectEvents(this.outputs,this,this.directionsRenderer),this.nguiMapComponent.addToMapObjectGroup(this.mapObjectName,this.mapObject),this.initialized$.emit(this.directionsRenderer)},t.prototype.ngOnChanges=function(t){var e={};for(var n in t)-1!==this.inputs.indexOf(n)&&(e[n]=this.optionBuilder.googlize(t[n].currentValue));t.directionsRequest&&this.directionsRenderer&&this.directionsService&&this.showDirections(this.directionsRequest)},t.prototype.showDirections=function(t){var n=this;this.directionsService.route(t,function(t,e){n.directionsRenderer&&(e===google.maps.DirectionsStatus.OK?n.directionsRenderer.setDirections(t):console.error("Directions request failed due to "+e))})},t.prototype.ngOnDestroy=function(){r.prototype.ngOnDestroy.call(this),this.nguiMap.clearObjectEvents(this.outputs,this,"directionsRenderer")},t}(Ft);$e.decorators=[{type:a.Directive,args:[{selector:"ngui-map > directions-renderer",inputs:Ne,outputs:Te}]}],$e.ctorParameters=function(){return[{type:Ce},{type:ve}]},$e.propDecorators={directionsRequest:[{type:a.Input,args:["directions-request"]}]};var Re=["options","circleOptions","drawingControl","drawingControlOptions","drawingMode","map","markerOptions","polygonOptions","polylineOptions","rectangleOptions"],Ve=["circlecomplete","markercomplete","overlaycomplete","polygoncomplete","polylinecomplete","rectanglecomplete"],Ge=function(n){function t(t){var e=n.call(this,t,"DrawingManager",Re,Ve)||this;return e.libraryName="drawing",e}return c(t,n),t}(Ft);Ge.decorators=[{type:a.Directive,args:[{selector:"ngui-map > drawing-manager",inputs:Re,outputs:Ve}]}],Ge.ctorParameters=function(){return[{type:Ce}]};var We=["url","bounds","clickable","opacity"],Ue=["click","dblclick"],Fe=function(n){function t(t){var e=n.call(this,t,"GroundOverlay",We,Ue)||this;return e.objectOptions={},e}return c(t,n),t.prototype.initialize=function(){this.objectOptions=this.optionBuilder.googlizeAllInputs(["clickable","opacity"],this),console.log(this.mapObjectName,"initialization objectOptions",this.objectOptions),this.mapObject=new google.maps.GroundOverlay(this.url,this.bounds,this.objectOptions),this.mapObject.setMap(this.nguiMapComponent.map),this.mapObject.mapObjectName=this.mapObjectName,this.nguiMap.setObjectEvents(this.outputs,this,this.mapObject),this.nguiMapComponent.addToMapObjectGroup(this.mapObjectName,this.mapObject),this.initialized$.emit(this.mapObject)},t}(Ft);Fe.decorators=[{type:a.Directive,args:[{selector:"ngui-map > ground-overlay",inputs:We,outputs:Ue}]}],Fe.ctorParameters=function(){return[{type:Ce}]};var Ze=["data","dissipating","gradient","maxIntensity","opacity","radius","options"],Be=[],qe=function(n){function t(t){var e=n.call(this,t,"HeatmapLayer",Ze,Be)||this;return e.libraryName="visualization",e}return c(t,n),t}(Ft);qe.decorators=[{type:a.Directive,args:[{selector:"ngui-map > heatmap-layer",inputs:Ze,outputs:Be}]}],qe.ctorParameters=function(){return[{type:Ce}]};var He=["clickable","preserveViewport","screenOverlays","suppressInfoWindows","url","zIndex","options"],Ye=["click","defaultviewport_changed","status_changed"],Je=function(e){function t(t){return e.call(this,t,"KmlLayer",He,Ye)||this}return c(t,e),t}(Ft);Je.decorators=[{type:a.Directive,args:[{selector:"ngui-map > kml-layer",inputs:He,outputs:Ye}]}],Je.ctorParameters=function(){return[{type:Ce}]};var Ke=["anchorPoint","animation","clickable","cursor","draggable","icon","label","opacity","optimized","place","position","shape","title","visible","zIndex","options","geoFallbackPosition"],Xe=["animationChanged","click","clickableChanged","cursorChanged","dblclick","drag","dragend","draggableChanged","dragstart","flatChanged","iconChanged","mousedown","mouseout","mouseover","mouseup","positionChanged","rightclick","shapeChanged","titleChanged","visibleChanged","zindexChanged"],Qe=function(n){function t(t){var e=n.call(this,t,"Marker",Ke,Xe)||this;return e.nguiMapComp=t,e.objectOptions={},e}return c(t,n),t.prototype.ngOnInit=function(){var t=this;this.nguiMapComponent.mapIdledOnce?this.initialize():this.nguiMapComponent.mapReady$.subscribe(function(){return t.initialize()})},t.prototype.initialize=function(){n.prototype.initialize.call(this),this.setPosition()},t.prototype.setPosition=function(){var n=this;this.position?"string"==typeof this.position&&this._subscriptions.push(this.nguiMapComp.geoCoder.geocode({address:this.position}).subscribe(function(t){n.mapObject.setPosition(t[0].geometry.location)},function(){n.mapObject.setPosition(n.objectOptions.geoFallbackPosition||new google.maps.LatLng(0,0))})):this._subscriptions.push(this.nguiMapComp.geolocation.getCurrentPosition().subscribe(function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.mapObject.setPosition(e)},function(){n.mapObject.setPosition(n.objectOptions.geoFallbackPosition||new google.maps.LatLng(0,0))}))},t}(Ft);Qe.decorators=[{type:a.Directive,args:[{selector:"ngui-map > marker",inputs:Ke,outputs:Xe}]}],Qe.ctorParameters=function(){return[{type:Ce}]};var tn=function Jn(t,e,n){var r=this;this.optionBuilder=t,this.elementRef=e,this.apiLoader=n,this.place_changed=new a.EventEmitter,this.initialized$=new a.EventEmitter,this.initialize=function(){if(r.objectOptions=r.optionBuilder.googlizeAllInputs(["bounds","componentRestrictions","types"],r),!google.maps.places)throw Wt("PlacesAutoComplete","places");r.autocomplete=new google.maps.places.Autocomplete(r.elementRef.nativeElement,r.objectOptions),r.autocomplete.addListener("place_changed",function(){r.place_changed.emit(r.autocomplete.getPlace())}),r.initialized$.emit(r.autocomplete)},n.load(),n.api$.subscribe(function(){return r.initialize()})};tn.decorators=[{type:a.Directive,args:[{selector:"[places-auto-complete]"}]}],tn.ctorParameters=function(){return[{type:me},{type:a.ElementRef},{type:he}]},tn.propDecorators={bounds:[{type:a.Input,args:["bounds"]}],componentRestrictions:[{type:a.Input,args:["componentRestrictions"]}],types:[{type:a.Input,args:["types"]}],place_changed:[{type:a.Output,args:["place_changed"]}],initialized$:[{type:a.Output}]};var en=["clickable","draggable","editable","fillColor","fillOpacity","geodesic","paths","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","options"],nn=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],rn=function(e){function t(t){return e.call(this,t,"Polygon",en,nn)||this}return c(t,e),t}(Ft);rn.decorators=[{type:a.Directive,args:[{selector:"ngui-map>polygon, ngui-map>map-polygon",inputs:en,outputs:nn}]}],rn.ctorParameters=function(){return[{type:Ce}]};var on=["clickable","draggable","editable","geodesic","icons","path","strokeColor","strokeOpacity","strokeWeight","visible","zIndex","options"],sn=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],un=function(e){function t(t){return e.call(this,t,"Polyline",on,sn)||this}return c(t,e),t}(Ft);un.decorators=[{type:a.Directive,args:[{selector:"ngui-map > polyline",inputs:on,outputs:sn}]}],un.ctorParameters=function(){return[{type:Ce}]};var cn=["selector","options","addressControl","addressControlOptions","clickToGo","disableDefaultUI","disableDoubleClickZoom","enableCloseButton","fullscreenControl","fullscreenControlOptions","imageDateControl","linksControl","motionTracking","motionTrackingControl","panControl","panControlOptions","pano","position","pov","scrollwheel","showRoadLabels","visible","zoomControl","zoomControlOptions"],an=["closeclick","pano_changed","position_changed","pov_changed","resize","status_changed","visible_changed","zoom_changed"],pn=function(e){function t(t){return e.call(this,t,"StreetViewPanorama",cn,an)||this}return c(t,e),t.prototype.initialize=function(){var t;this.objectOptions=this.optionBuilder.googlizeAllInputs(this.inputs,this),console.log(this.mapObjectName,"initialization objectOptions",this.objectOptions),this.objectOptions.selector?(t=document.querySelector(this.selector),delete this.objectOptions.selector):t=this.nguiMapComponent.el,"string"==typeof this.objectOptions.position&&delete this.objectOptions.position,this.mapObject=new google.maps[this.mapObjectName](t,this.objectOptions),this.mapObject.mapObjectName=this.mapObjectName,this.mapObject.nguiMapComponent=this.nguiMapComponent,this.nguiMap.setObjectEvents(this.outputs,this,this.mapObject),this.nguiMapComponent.addToMapObjectGroup(this.mapObjectName,this.mapObject),this.initialized$.emit(this.mapObject)},t.prototype.ngOnDestroy=function(){this.nguiMapComponent.el&&this.nguiMap.clearObjectEvents(this.outputs,this,"mapObject")},t}(Ft);pn.decorators=[{type:a.Directive,args:[{selector:"ngui-map > street-view-panorama",inputs:cn,outputs:an}]}],pn.ctorParameters=function(){return[{type:Ce}]};var ln=["autoRefresh","options"],hn=[],fn=function(e){function t(t){return e.call(this,t,"TrafficLayer",ln,hn)||this}return c(t,e),t}(Ft);fn.decorators=[{type:a.Directive,args:[{selector:"ngui-map > traffic-layer",inputs:ln,outputs:hn}]}],fn.ctorParameters=function(){return[{type:Ce}]};var dn=[],gn=[],mn=function(e){function t(t){return e.call(this,t,"TransitLayer",dn,gn)||this}return c(t,e),t}(Ft);mn.decorators=[{type:a.Directive,args:[{selector:"ngui-map > transit-layer",inputs:dn,outputs:gn}]}],mn.ctorParameters=function(){return[{type:Ce}]};var yn=["click","dragend"],bn=function(){function t(t,e,n,r){var o=this;this._customMarkerOverlayViewService=t,this._nguiMapComponent=e,this._elementRef=n,this._mapService=r,this.initialized=new a.EventEmitter,this.draggable=!1,this.attachToParentMap=!0,this.intialized$=new et(1),this._destroyed$=new P,this._elementRef.nativeElement.style.display="none",yn.forEach(function(t){return o[t]=new a.EventEmitter})}return t.prototype.ngOnInit=function(){var t=this;this._customMarkerOverlayViewService.overlayDefined$.pipe(function n(e){return function(t){return t.lift(new ae(e))}}(this._destroyed$)).subscribe(function(){return t._init()})},t.prototype.ngOnChanges=function(t){t.draggable&&this.overlay&&this.overlay.setDraggable(this.draggable),t.position&&this.overlay&&this.overlay.setPosition(new google.maps.LatLng(+this.position.lat,+this.position.lng))},t.prototype.ngOnDestroy=function(){this.overlay&&this._mapService.clearObjectEvents(yn,this,"overlay")},t.prototype._init=function(){this._el=this._elementRef.nativeElement,this.overlay=new this._customMarkerOverlayViewService.CustomMarkerOverlayView(this._el,this.position,this.draggable),this.attachToParentMap&&this.overlay.setMap(this._nguiMapComponent.map),this._mapService.setObjectEvents(yn,this,this.overlay),this.initialized.emit(this.overlay),this.intialized$.next(this.overlay)},t}();bn.decorators=[{type:a.Component,args:[{selector:"ngui-map > custom-marker",outputs:yn,template:"\n      <ng-content>\n      </ng-content>\n    ",changeDetection:a.ChangeDetectionStrategy.OnPush}]}],bn.ctorParameters=function(){return[{type:_e},{type:Ce},{type:a.ElementRef},{type:ye}]},bn.propDecorators={initialized:[{type:a.Output}],draggable:[{type:a.Input}],position:[{type:a.Input}],attachToParentMap:[{type:a.Input}]};var vn=["click","clusteringbegin","clusteringend","mouseout","mouseover"],_n=function(){function t(t,e,n,r){var o=this;this._markerClustererProviderService=t,this._mapLoadedService=e,this._mapService=n,this._nguiMapComponent=r,this._defaultOptions={averageCenter:!0,maxZoom:12},this._defaultClusterStyles={width:40,height:40,textColor:"white",textSize:12,url:undefined},this._clusterStyles=this._defaultClusterStyles,this._options=this._defaultOptions,vn.forEach(function(t){return o[t]=new a.EventEmitter})}return Object.defineProperty(t.prototype,"clusterStyles",{set:function(t){this._clusterStyles=Object.assign({},this._defaultClusterStyles,t||{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{set:function(t){this._options=Object.assign({},this._defaultOptions,t||{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customMarkers",{set:function(t){this._customMarkers=t,this._updateMarkers()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var n=this;this._mapLoadedService.loaded$.pipe(Kt(Boolean),function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&h(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(jt([t].concat(e)),new Ot(n))}}(this._markerClustererProviderService.getClusterer()),se()).subscribe(function(t){var e=t[1];n.MarkerClusterer=e,n._map=n._nguiMapComponent.map,n._initCluster()})},t.prototype.ngOnDestroy=function(){this._removeCluster()},t.prototype._updateMarkers=function(){var e=this;(0===this._customMarkers.length?Y([]):function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return B(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),H(t,r).lift(new Ot(n))}.apply(void 0,this._customMarkers.map(function(t){return t.intialized$}))).subscribe(function(t){e._markerOverlays=t,e.cluster?e._reloadClusterOverlays():e._initCluster()})},t.prototype._initCluster=function(){this.cluster&&this._removeCluster(),this.MarkerClusterer&&this._map&&this._markerOverlays&&(this.cluster=new this.MarkerClusterer(this._map,this._markerOverlays,Object.assign({},this._options,{styles:this._getClusterStyles()})),this._mapService.setObjectEvents(vn,this,this.cluster))},t.prototype._removeCluster=function(){this.cluster&&this.cluster.clearMarkers(),this._mapService.clearObjectEvents(vn,this,"cluster")},t.prototype._reloadClusterOverlays=function(){this.cluster&&this._markerOverlays&&(this.cluster.clearMarkers(),this.cluster.addMarkers(this._markerOverlays))},t.prototype._getClusterStyles=function(){return[Object.assign({},this._clusterStyles,{url:this._getGoogleClusterInlineSvg()})]},t.prototype._getGoogleClusterInlineSvg=function(){var t;return"data:image/svg+xml;base64,"+window.btoa(this.rawImage||(void 0===(t=this.color)&&(t="#004b7a"),'\n    <svg\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:xlink="http://www.w3.org/1999/xlink"\n        viewBox="-100 -100 200 200">\n        <defs>\n            <g\n                id="a"\n                transform="rotate(45)">\n                <path\n                    d="M0 47A47 47 0 0 0 47 0L62 0A62 62 0 0 1 0 62Z"\n                    fill-opacity="0.7"/>\n                <path\n                    d="M0 67A67 67 0 0 0 67 0L81 0A81 81 0 0 1 0 81Z"\n                    fill-opacity="0.5"/>\n                <path\n                    d="M0 86A86 86 0 0 0 86 0L100 0A100 100 0 0 1 0 100Z"\n                    fill-opacity="0.3"/>\n            </g>\n        </defs>\n        <g transform="rotate('+Math.round(120*Math.random())+')" fill="'+t+'">\n            <circle r="42"/>\n            <g>\n                <use xlink:href="#a"/>\n            </g>\n            <g transform="rotate(120)">\n                <use xlink:href="#a"/>\n            </g>\n            <g transform="rotate(240)">\n                <use xlink:href="#a"/>\n            </g>\n        </g>\n    </svg>\n'))},t}();_n.decorators=[{type:a.Directive,args:[{selector:"custom-marker-cluster",outputs:vn}]}],_n.ctorParameters=function(){return[{type:be},{type:ge},{type:ye},{type:Ce}]},_n.propDecorators={clusterStyles:[{type:a.Input}],rawImage:[{type:a.Input}],color:[{type:a.Input}],options:[{type:a.Input}],customMarkers:[{type:a.ContentChildren,args:[bn]}]};var wn=[Me,ze,_n,bn,Ae,$e,Ge,Fe,qe,ke,ke,Je,Qe,Ce,tn,rn,un,pn,fn,mn],On=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:le,useValue:t}]}},e}();On.decorators=[{type:a.NgModule,args:[{imports:[e.CommonModule],declarations:wn,exports:[wn],providers:[de,ve,ye,me,{provide:he,useClass:fe}]}]}],On.ctorParameters=function(){return[]},t.BicyclingLayer=Me,t.NavigatorGeolocation=ve,t.OptionBuilder=me,t.NG_MAP_CONFIG_TOKEN=le,t.NgMapApiLoader=he,t.NgMapAsyncApiLoader=fe,t.NguiMapComponent=Ce,t.InfoWindow=ke,t.Circle=ze,t.DataLayer=Ae,t.DirectionsRenderer=$e,t.DrawingManager=Ge,t.GeoCoder=de,t.GroundOverlay=Fe,t.HeatmapLayer=qe,t.KmlLayer=Je,t.Marker=Qe,t.MapService=ye,t.PlacesAutoComplete=tn,t.Polygon=rn,t.Polyline=un,t.StreetViewPanorama=pn,t.TrafficLayer=fn,t.TransitLayer=mn,t.NguiMapModule=On,t.ɵf=bn,t.ɵc=_e,t.ɵa=Ft,t.ɵe=_n,t.ɵb=ge,t.ɵd=be,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=map.umd.min.js.map
